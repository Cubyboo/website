<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Join the Guardians ‚Äî Cubyboo Whitelist</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .page-header { padding: 52px 0 8px; text-align: center; }
    .page-header__sub { font-size:0.85rem; font-weight:600; letter-spacing:0.1em; text-transform:uppercase; color:var(--text-dim); margin-top:6px; }
    .wl-layout { display:grid; gap:24px; padding:32px 0 80px; }
    .wl-card { padding:40px; }
    .card-section-title { font-family:'Syne',sans-serif; font-size:0.75rem; font-weight:800; letter-spacing:0.14em; text-transform:uppercase; color:var(--text-dim); margin-bottom:18px; display:flex; align-items:center; gap:10px; }
    .card-section-title::after { content:''; flex:1; height:1px; background:var(--border); }
    .form-gap { display:flex; flex-direction:column; gap:20px; }
    .submit-area { margin-top:8px; }
  </style>
</head>
<body>
  <div class="bg-layer"><div class="bg-layer__mesh"></div><div class="bg-layer__grid"></div></div>
  <div class="particles" id="js-particles"></div>
  <div class="wrapper">
    <div class="container">

      <header class="site-header page-header">
        <div class="logo-wrap"><img src="cubyboo-logo.png" alt="CUBYBOO" class="logo-img"></div>
        <p class="site-tagline">‚ú¶ What we cherish exists ‚ú¶</p>
        <p class="page-header__sub">2,222 NFTs ¬∑ 22 Batches ¬∑ 4 Phases</p>
      </header>

      <div class="wl-layout container--narrow" style="padding-left:0;padding-right:0;">

        <!-- Progress -->
        <div class="card wl-card anim-fade-up anim-fade-up-1" style="padding:28px 36px;">
          <p class="card-section-title">Whitelist Progress</p>
          <div class="progress-wrap">
            <div class="progress-meta">
              <span class="progress-label">Spots claimed this session</span>
              <span class="progress-value" id="js-progress-val">0%</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" id="js-progress-bar" style="width:0%"></div>
            </div>
          </div>
        </div>

        <!-- Steps -->
        <div class="card wl-card anim-fade-up anim-fade-up-2">
          <p class="card-section-title">Complete Missions</p>
          <h2 class="heading-lg" style="margin-bottom:6px;"><span class="grad-text">Join the Guardians</span></h2>
          <p style="font-size:0.9rem;color:var(--text-muted);margin-bottom:28px;">Complete all missions below to secure your Whitelist spot.</p>

          <div class="steps-list" id="js-steps">
            <div class="step-item" id="step1">
              <div class="step-num">1</div>
              <div class="step-body">
                <h3>Follow @Cubyboo_NFT on ùïè</h3>
                <p>Join our community on Twitter to stay updated</p>
                <a href="https://twitter.com/Cubyboo_NFT" target="_blank" rel="noopener">‚Üí Follow now</a>
              </div>
            </div>
            <div class="step-item" id="step2">
              <div class="step-num">2</div>
              <div class="step-body">
                <h3>Like & Repost the pinned tweet</h3>
                <p>Help us spread the Guardians' mission</p>
                <a href="https://twitter.com/Cubyboo_NFT" target="_blank" rel="noopener">‚Üí View tweet</a>
              </div>
            </div>
            <div class="step-item" id="step3">
              <div class="step-num">3</div>
              <div class="step-body">
                <h3>Tag 3 friends for Bonus WL priority! üéÅ</h3>
                <p>Mention 3 friends in the pinned tweet, then paste your tweet link below</p>
                <a href="https://twitter.com/Cubyboo_NFT" target="_blank" rel="noopener">‚Üí View pinned tweet</a>
              </div>
            </div>
            <div class="step-item" id="step4">
              <div class="step-num">4</div>
              <div class="step-body">
                <h3>Sign the Guardian's Oath</h3>
                <p>Accept your sacred duty as a Guardian</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Form -->
        <div class="card wl-card anim-fade-up anim-fade-up-3">
          <p class="card-section-title">Register</p>

          <div class="notice notice--warning" style="margin-bottom:24px;">
            <strong>All actions will be manually verified.</strong> Incomplete or fraudulent submissions will be disqualified. Complete all steps truthfully to secure your whitelist spot.
          </div>

          <form id="js-wl-form">
            <div class="form-gap">
              <div class="field-group">
                <label class="field-label" for="twitter">Twitter Handle <span class="required">*</span></label>
                <input type="text" id="twitter" name="twitter" class="field-input" placeholder="@yourhandle" required>
              </div>
              <div class="field-group">
                <label class="field-label" for="tweetLink">Link to your tweet <span class="optional">(optional ‚Äî for bonus priority)</span></label>
                <input type="url" id="tweetLink" name="tweetLink" class="field-input" placeholder="https://twitter.com/yourhandle/status/...">
                <p class="field-hint">Paste the link to your tweet where you tagged 3 friends</p>
              </div>
              <div class="field-group">
                <label class="field-label" for="wallet">Abstract Wallet <span class="required">*</span></label>
                <input type="text" id="wallet" name="wallet" class="field-input" placeholder="0x..." required pattern="^0x[a-fA-F0-9]{40}$">
              </div>
            </div>
            <div class="submit-area" style="margin-top:24px;">
              <button type="submit" class="btn btn-primary btn-full" id="js-submit-btn">
                üêª Join the Guardians
              </button>
            </div>
          </form>

          <div class="success-box" id="js-success">
            <div class="success-box__icon">‚ú®</div>
            <h3 class="success-box__title">Welcome, Guardian!</h3>
            <p class="success-box__text">
              Your Whitelist request has been successfully registered.<br><br>
              <strong style="color:var(--green);">The Prismatic Sanctuary awaits you üåà</strong>
            </p>
          </div>
        </div>

      </div><!-- /wl-layout -->

      <!-- Footer -->
      <footer class="site-footer">
        <ul class="social-list">
          <li><a href="https://twitter.com/Cubyboo_NFT" class="social-link" target="_blank" rel="noopener" aria-label="Twitter">ùïè</a></li>
          <li><a href="#" class="social-link" data-soon="true" onclick="return false;" aria-label="Discord"><img src="discord-icon.png" alt="Discord"></a></li>
          <li><a href="#" class="social-link" data-soon="true" onclick="return false;" aria-label="OpenSea"><img src="opensea-icon.png" alt="OpenSea"></a></li>
        </ul>
        <div>
          <span class="chain-badge">
            <img src="abstract-icon.png" alt="Abstract" onerror="this.style.display='none'">
            Abstract
          </span>
        </div>
        <p>¬© 2026 Cubyboo ¬∑ What we cherish exists.</p>
      </footer>

    </div>
  </div>

  <!-- Oath modal (shown if oath not signed) -->
  <div class="modal-overlay" id="js-oath-modal">
    <div class="modal-box">
      <div style="text-align:center;margin-bottom:20px;">
        <img src="cubyboo-logo.png" alt="CUBYBOO" style="max-width:200px;width:80%;filter:drop-shadow(0 0 24px rgba(255,95,186,0.3));">
        <p style="font-size:0.75rem;font-weight:700;letter-spacing:0.12em;text-transform:uppercase;color:var(--purple);margin-top:8px;">‚ú¶ What we cherish exists ‚ú¶</p>
      </div>
      <div style="text-align:center;margin-bottom:16px;">
        <h3 class="heading-md grad-text" style="margin-bottom:4px;letter-spacing:0.04em;text-transform:uppercase;">The Guardian's Oath</h3>
        <p style="font-size:0.8rem;color:var(--text-muted);">You must take the oath before joining</p>
      </div>
      <div style="padding:16px 18px;background:rgba(0,0,0,0.3);border:1px solid var(--border);border-radius:var(--radius-sm);margin-bottom:16px;">
        <div style="font-size:0.82rem;line-height:1.7;text-align:center;color:rgba(240,240,255,0.85);white-space:pre-line;">I, <strong style="color:var(--cyan);">Guardian</strong>,
acknowledge that what I cherish exists.

I vow to protect the essence entrusted to my Cubyboo,
To see it. To honor it.
To never let it fade into oblivion.

I do not fight with force, but with presence.

<strong class="grad-text" style="font-family:'Syne',sans-serif;font-size:0.85rem;font-weight:800;letter-spacing:0.1em;">WHAT WE CHERISH EXISTS</strong></div>
      </div>
      <label class="check-row" style="margin-bottom:14px;">
        <input type="checkbox" id="js-modal-check">
        <span style="font-size:0.85rem;color:var(--text-muted);line-height:1.4;cursor:pointer;">I solemnly accept this oath and commit to my role as Guardian</span>
      </label>
      <div style="display:flex;gap:12px;">
        <button class="btn btn-ghost" onclick="window.location.href='index.html'" style="flex:1;">‚Üê Back</button>
        <button class="btn btn-primary" id="js-modal-accept" disabled style="flex:2;">‚öîÔ∏è Accept & Enter</button>
      </div>
    </div>
  </div>

  <script>
    // Particles
    (function(){
      const el=document.getElementById('js-particles');
      const colors=['#FF5FBA','#00E5FF','#FFE040','#4DFFA0','#FF8C42','#A855F7','#3B82F6'];
      for(let i=0;i<32;i++){
        const p=document.createElement('div');
        p.className='particle';
        const s=Math.random()*4+2;
        p.style.cssText=`width:${s}px;height:${s}px;left:${Math.random()*100}%;background:${colors[Math.floor(Math.random()*colors.length)]};animation-delay:${Math.random()*20}s;animation-duration:${Math.random()*12+10}s;`;
        el.appendChild(p);
      }
    })();

    // Progress
    function animateProgress(){
      const total=200, claimed=50;
      const target=Math.floor((claimed/total)*100);
      let cur=0;
      const bar=document.getElementById('js-progress-bar');
      const val=document.getElementById('js-progress-val');
      const iv=setInterval(()=>{
        if(cur>=target){clearInterval(iv);return;}
        cur++;
        bar.style.width=cur+'%';
        val.textContent=cur+'%';
      },20);
    }

    // Oath gate
    window.addEventListener('load',function(){
      const oathSigned=localStorage.getItem('cubyboo_oath_signed')==='true';
      if(!oathSigned){
        document.getElementById('js-oath-modal').classList.add('is-open');
      } else {
        document.getElementById('step4').classList.add('is-done');
      }
      if(localStorage.getItem('cubyboo_wl_submitted')==='true'){
        document.getElementById('js-wl-form').style.display='none';
        document.getElementById('js-success').classList.add('is-visible');
        ['step1','step2','step3','step4'].forEach(id=>document.getElementById(id).classList.add('is-done'));
      }
      animateProgress();
    });

    document.getElementById('js-modal-check').addEventListener('change',function(){
      document.getElementById('js-modal-accept').disabled=!this.checked;
    });
    document.getElementById('js-modal-accept').addEventListener('click',function(){
      localStorage.setItem('cubyboo_oath_signed','true');
      document.getElementById('js-oath-modal').classList.remove('is-open');
      document.getElementById('step4').classList.add('is-done');
    });

    // Form submit
    const GOOGLE_SCRIPT_URL='https://script.google.com/macros/s/AKfycbxeflwORN7mzkx5CEx5Ul1vOvxklTQ0oYl1TIs2qa415G2VptyKG2zyBkEWws6zzLfSoA/exec';

    document.getElementById('js-wl-form').addEventListener('submit',async function(e){
      e.preventDefault();
      const twitter=document.getElementById('twitter').value;
      const wallet=document.getElementById('wallet').value;
      const btn=document.getElementById('js-submit-btn');
      if(!wallet.match(/^0x[a-fA-F0-9]{40}$/)){alert('‚ùå Invalid wallet format. Must start with 0x and contain 40 hex characters.');return;}
      if(!twitter.startsWith('@')){alert('‚ùå Twitter handle must start with @');return;}
      btn.disabled=true;
      btn.innerHTML='‚è≥ Submitting‚Ä¶';
      try{
        const tweetLink=document.getElementById('tweetLink').value;
        const fd=new FormData();
        fd.append('twitter',twitter);fd.append('wallet',wallet);fd.append('tweetLink',tweetLink);
        fd.append('oath_signed','true');fd.append('timestamp',new Date().toISOString());
        const res=await fetch(GOOGLE_SCRIPT_URL,{method:'POST',body:fd});
        const result=await res.json();
        if(result.status==='success'){
          document.getElementById('js-wl-form').style.display='none';
          document.getElementById('js-success').classList.add('is-visible');
          ['step1','step2','step3','step4'].forEach(id=>document.getElementById(id).classList.add('is-done'));
          localStorage.setItem('cubyboo_wl_submitted','true');
          localStorage.setItem('cubyboo_wl_twitter',twitter);
        } else { throw new Error(result.message||'Submission failed'); }
      } catch(err){
        console.error(err);
        alert('‚ùå An error occurred. Please try again later.');
        btn.disabled=false;
        btn.innerHTML='üêª Join the Guardians';
      }
    });
  </script>
</body>
</html>
